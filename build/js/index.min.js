var letter=document.querySelector(".button--letter"),popupletter=document.querySelector(".modal--letter"),closeletter=document.querySelector(".modal__button-close--form"),link=document.querySelector(".contacts__link"),popupmap=document.querySelector(".modal--map"),closemap=document.querySelector(".modal__button-close--map"),form=popupletter.querySelector("form"),login=popupletter.querySelector("[name=login]"),email=popupletter.querySelector("[name=email]"),text=popupletter.querySelector("[name=text]"),storage=localStorage.getItem("login"),isStorageSupport=!0;storage="";letter.addEventListener("click",function(e){e.preventDefault(),popupletter.classList.add("modal--show"),login.focus(),storage?(login.value=storage,text.focus()):login.focus()}),closeletter.addEventListener("click",function(e){e.preventDefault(),popupletter.classList.remove("modal--show"),popupletter.classList.remove("modal--error")}),link.addEventListener("click",function(e){e.preventDefault(),popupmap.classList.add("modal--show")}),closemap.addEventListener("click",function(e){e.preventDefault(),popupmap.classList.remove("modal--show")}),form.addEventListener("submit",function(e){e.preventDefault(),console.log("Отправляем форму"),console.log(login.value),console.log(email.value),console.log(text.value),login.value&&email.value?isStorageSupport&&localStorage.setItem("login",login.value):(e.preventDefault(),popupletter.classList.add("modal-error"));try{storage=localStorage.getItem("login")}catch(e){isStorageSupport=!1}}),window.addEventListener("keydown",function(e){27===e.keyCode&&(e.preventDefault(),popupmap.classList.contains("modal--show")&&popupmap.classList.remove("modal--show"))}),window.addEventListener("keydown",function(e){27===e.keyCode&&(e.preventDefault(),popupletter.classList.contains("modal--show")&&popupletter.classList.remove("modal--show"))});